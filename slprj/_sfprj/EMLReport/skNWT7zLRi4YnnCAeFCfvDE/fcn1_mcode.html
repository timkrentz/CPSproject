<!-- saved from url=(0014)about:internet -->
<pre class="code">
<span class="srcline"><span class="lineno"><a href="1,1" id="srcline1"> 1</a></span><span class="line"><span class="keyword">function</span> [<span class="var type1" id="S2T1U3">theta</span>,<span class="var type1" id="S3T1U4">offset</span>]  = fcn(<span class="var type1" id="S4T2U7">beams</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="1,2" id="srcline2"> 2</a></span><span class="line"><span class="mxinfo " id="T1:U4"><span class="var type1" id="S5T1U10">step</span>=<span class="mxinfo " id="T1:U6"><span class="mxinfo " id="T1:U7">2*pi</span>/<span class="mxinfo " id="T1:U8">length(<span class="var type1" id="S4T2U18">beams</span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,3" id="srcline3"> 3</a></span><span class="line"><span class="mxinfo " id="T1:U10"><span class="var type1" id="S2T1U21">theta</span>=<span class="mxinfo " id="T1:U12">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,4" id="srcline4"> 4</a></span><span class="line">[<span class="mxinfo " id="T1:U13">~</span>,<span class="var type1" id="S8T1U27">minimum</span>]=min(<span class="mxinfo " id="T3:U15"><span class="var type1" id="S4T2U31">beams</span>(<span class="mxinfo " id="T4:U17">:</span>,<span class="mxinfo " id="T5:U18">1</span>)</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,5" id="srcline5"> 5</a></span><span class="line">[<span class="mxinfo " id="T1:U19">~</span>,<span class="var type1" id="S10T1U38">min_left</span>]=min(<span class="mxinfo " id="T6:U21"><span class="var type1" id="S4T2U42">beams</span>(<span class="mxinfo " id="T7:U23">2:(length(<span class="var type1" id="S4T2U49">beams</span>)/2)</span>,<span class="mxinfo " id="T5:U25">1</span>)</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,6" id="srcline6"> 6</a></span><span class="line">[<span class="mxinfo " id="T1:U26">~</span>,<span class="var type1" id="S11T1U56">min_right</span>]=min(<span class="mxinfo " id="T6:U28"><span class="var type1" id="S4T2U60">beams</span>(<span class="mxinfo " id="T7:U30">(length(<span class="var type1" id="S4T2U67">beams</span>)/2)+2:end</span>,<span class="mxinfo " id="T5:U32">1</span>)</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,7" id="srcline7"> 7</a></span><span class="line"><span class="mxinfo " id="T1:U33"><span class="var type1" id="S13T1U75">firstBeam</span> = <span class="mxinfo " id="T1:U35"><span class="var type1" id="S4T2U77">beams</span>(<span class="mxinfo " id="T5:U37">1</span>,<span class="mxinfo " id="T5:U38">1</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,8" id="srcline8"> 8</a></span><span class="line"><span class="mxinfo " id="T1:U39"><span class="var type1" id="S14T1U82">rearBeam</span> = <span class="mxinfo " id="T1:U41"><span class="var type1" id="S4T2U84">beams</span>(<span class="mxinfo " id="T1:U43">129</span>,<span class="mxinfo " id="T1:U44">1</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,9" id="srcline9"> 9</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,10" id="srcline10">10</a></span><span class="line"><span class="comment">%if minimum is in front or behind then</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,11" id="srcline11">11</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,12" id="srcline12">12</a></span><span class="line"><span class="autoExtrinsicFcn" id="F56N2:B89">disp</span>((length(<span class="var type1" id="S4T2U93">beams</span>)))</span></span>
<span class="srcline"><span class="lineno"><a href="1,13" id="srcline13">13</a></span><span class="line"><span class="keyword">if</span> (<span class="mxinfo " id="T8:U46"><span class="var type1" id="S13T1U98">firstBeam</span> &lt; <span class="var type1" id="S14T1U99">rearBeam</span></span>)</span></span>
<span class="srcline"><span class="lineno"><a href="1,14" id="srcline14">14</a></span><span class="line">    <span class="keyword">if</span> <span class="mxinfo " id="T8:U49"><span class="var type1" id="S8T1U103">minimum</span>&lt;=<span class="mxinfo " id="T1:U51"><span class="mxinfo " id="T1:U52">length(<span class="var type1" id="S4T2U107">beams</span>)</span>/<span class="mxinfo " id="T1:U54">2</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,15" id="srcline15">15</a></span><span class="line">        <span class="mxinfo " id="T1:U55"><span class="var type1" id="S2T1U111">theta</span>=<span class="mxinfo " id="T1:U57">(<span class="mxinfo " id="T1:U58"><span class="mxinfo " id="T1:U59">pi</span>/<span class="mxinfo " id="T1:U60">2</span></span>)-<span class="mxinfo " id="T1:U61">(<span class="mxinfo " id="T1:U62"><span class="var type1" id="S8T1U121">minimum</span>-<span class="mxinfo " id="T1:U64">1</span></span>)*<span class="var type1" id="S5T1U123">step</span></span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,16" id="srcline16">16</a></span><span class="line">    <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,17" id="srcline17">17</a></span><span class="line">        <span class="mxinfo " id="T1:U66"><span class="var type1" id="S2T1U127">theta</span>=<span class="mxinfo " id="T1:U68">-(<span class="mxinfo " id="T1:U69">(<span class="mxinfo " id="T1:U70"><span class="mxinfo " id="T1:U71">pi</span>/<span class="mxinfo " id="T1:U72">2</span></span>)-<span class="mxinfo " id="T1:U73">(<span class="mxinfo " id="T1:U74"><span class="mxinfo " id="T1:U75"><span class="mxinfo " id="T1:U76">length(<span class="var type1" id="S4T2U142">beams</span>)</span>+<span class="mxinfo " id="T1:U78">1</span></span>-<span class="var type1" id="S8T1U144">minimum</span></span>)*<span class="var type1" id="S5T1U145">step</span></span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,18" id="srcline18">18</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,19" id="srcline19">19</a></span><span class="line"><span class="keyword">elseif</span> (<span class="mxinfo " id="T8:U81"><span class="var type1" id="S13T1U149">firstBeam</span> &gt; <span class="var type1" id="S14T1U150">rearBeam</span></span>)</span></span>
<span class="srcline"><span class="lineno"><a href="1,20" id="srcline20">20</a></span><span class="line">    <span class="keyword">if</span> <span class="mxinfo " id="T8:U84"><span class="var type1" id="S8T1U154">minimum</span>&lt;=<span class="mxinfo " id="T1:U86"><span class="mxinfo " id="T1:U87">length(<span class="var type1" id="S4T2U158">beams</span>)</span>/<span class="mxinfo " id="T1:U89">2</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,21" id="srcline21">21</a></span><span class="line">        <span class="mxinfo " id="T1:U90"><span class="var type1" id="S2T1U162">theta</span>=<span class="mxinfo " id="T1:U92">-(<span class="mxinfo " id="T1:U93">(<span class="mxinfo " id="T1:U94"><span class="mxinfo " id="T1:U95">pi</span>/<span class="mxinfo " id="T1:U96">2</span></span>)-<span class="mxinfo " id="T1:U97">(<span class="mxinfo " id="T1:U98">(<span class="mxinfo " id="T1:U99"><span class="mxinfo " id="T1:U100"><span class="mxinfo " id="T1:U101">length(<span class="var type1" id="S4T2U179">beams</span>)</span>/<span class="mxinfo " id="T1:U103">2</span></span>+<span class="mxinfo " id="T1:U104">1</span></span>)-<span class="var type1" id="S8T1U182">minimum</span></span>)*<span class="var type1" id="S5T1U183">step</span></span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,22" id="srcline22">22</a></span><span class="line">    <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,23" id="srcline23">23</a></span><span class="line">        <span class="mxinfo " id="T1:U107"><span class="var type1" id="S2T1U187">theta</span>=<span class="mxinfo " id="T1:U109">(<span class="mxinfo " id="T1:U110"><span class="mxinfo " id="T1:U111">pi</span>/<span class="mxinfo " id="T1:U112">2</span></span>)-<span class="mxinfo " id="T1:U113">(<span class="mxinfo " id="T1:U114"><span class="var type1" id="S8T1U197">minimum</span>-(<span class="mxinfo " id="T1:U116"><span class="mxinfo " id="T1:U117"><span class="mxinfo " id="T1:U118">length(<span class="var type1" id="S4T2U203">beams</span>)</span>/<span class="mxinfo " id="T1:U120">2</span></span>+<span class="mxinfo " id="T1:U121">1.5</span></span>)</span>)*<span class="var type1" id="S5T1U206">step</span></span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,24" id="srcline24">24</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,25" id="srcline25">25</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,26" id="srcline26">26</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,27" id="srcline27">27</a></span><span class="line"><span class="keyword">if</span> <span class="mxinfo " id="T8:U123"><span class="var type1" id="S8T1U210">minimum</span>&lt;=<span class="mxinfo " id="T1:U125"><span class="mxinfo " id="T1:U126">length(<span class="var type1" id="S4T2U214">beams</span>)</span>/<span class="mxinfo " id="T1:U128">2</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,28" id="srcline28">28</a></span><span class="line">    <span class="mxinfo " id="T1:U129"><span class="var type1" id="S16T1U218">x</span>=<span class="mxinfo " id="T1:U131"><span class="var type1" id="S4T2U220">beams</span>(<span class="mxinfo " id="T1:U133"><span class="var type1" id="S8T1U222">minimum</span>+(<span class="mxinfo " id="T1:U135"><span class="mxinfo " id="T1:U136">length(<span class="var type1" id="S4T2U227">beams</span>)</span>/<span class="mxinfo " id="T1:U138">2</span></span>)</span>,<span class="mxinfo " id="T1:U139">1</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,29" id="srcline29">29</a></span><span class="line">    <span class="mxinfo " id="T1:U140"><span class="var type1" id="S17T1U232">y</span>=<span class="mxinfo " id="T1:U142"><span class="var type1" id="S4T2U234">beams</span>(<span class="var type1" id="S8T1U235">minimum</span>,<span class="mxinfo " id="T1:U145">1</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,30" id="srcline30">30</a></span><span class="line"><span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,31" id="srcline31">31</a></span><span class="line">    <span class="mxinfo " id="T1:U146"><span class="var type1" id="S16T1U240">x</span>=<span class="mxinfo " id="T1:U148"><span class="var type1" id="S4T2U242">beams</span>(<span class="var type1" id="S8T1U243">minimum</span>,<span class="mxinfo " id="T1:U151">1</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,32" id="srcline32">32</a></span><span class="line">    <span class="mxinfo " id="T1:U152"><span class="var type1" id="S17T1U247">y</span>=<span class="mxinfo " id="T1:U154"><span class="var type1" id="S4T2U249">beams</span>(<span class="mxinfo " id="T1:U156"><span class="var type1" id="S8T1U251">minimum</span>-(<span class="mxinfo " id="T1:U158"><span class="mxinfo " id="T1:U159">length(<span class="var type1" id="S4T2U256">beams</span>)</span>/<span class="mxinfo " id="T1:U161">2</span></span>)</span>,<span class="mxinfo " id="T1:U162">1</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,33" id="srcline33">33</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,34" id="srcline34">34</a></span><span class="line"><span class="mxinfo " id="T1:U163"><span class="var type1" id="S3T1U261">offset</span>=<span class="mxinfo " id="T1:U165"><span class="mxinfo " id="T1:U166">(<span class="mxinfo " id="T1:U167"><span class="var type1" id="S16T1U266">x</span>+<span class="var type1" id="S17T1U267">y</span></span>)/<span class="mxinfo " id="T1:U170">2</span></span>-<span class="var type1" id="S17T1U269">y</span></span></span>;</span></span>
</pre>

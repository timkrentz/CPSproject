<!-- saved from url=(0014)about:internet -->
<pre class="code">
<span class="srcline"><span class="lineno"><a href="1,1" id="srcline1"> 1</a></span><span class="line"><span class="keyword">function</span> [<span class="var type1" id="S2T1U3">theta</span>,<span class="var type1" id="S3T1U4">offset</span>]  = fcn(<span class="var type1" id="S4T2U7">beams</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="1,2" id="srcline2"> 2</a></span><span class="line"><span class="mxinfo " id="T1:U4"><span class="var type1" id="S5T1U10">step</span>=<span class="mxinfo " id="T1:U6"><span class="mxinfo " id="T1:U7">2*pi</span>/<span class="mxinfo " id="T1:U8">length(<span class="var type1" id="S4T2U18">beams</span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,3" id="srcline3"> 3</a></span><span class="line"><span class="mxinfo " id="T1:U10"><span class="var type1" id="S2T1U21">theta</span>=<span class="mxinfo " id="T1:U12">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,4" id="srcline4"> 4</a></span><span class="line">[<span class="mxinfo " id="T1:U13">~</span>,<span class="var type1" id="S8T1U27">minimum</span>]=min(<span class="mxinfo " id="T3:U15"><span class="var type1" id="S4T2U31">beams</span>(<span class="mxinfo " id="T4:U17">:</span>,<span class="mxinfo " id="T5:U18">1</span>)</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,5" id="srcline5"> 5</a></span><span class="line">[<span class="mxinfo " id="T1:U19">~</span>,<span class="var type1" id="S10T1U38">min_left</span>]=min(<span class="mxinfo " id="T6:U21"><span class="var type1" id="S4T2U42">beams</span>(<span class="mxinfo " id="T7:U23">2:(length(<span class="var type1" id="S4T2U49">beams</span>)/2)</span>,<span class="mxinfo " id="T5:U25">1</span>)</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,6" id="srcline6"> 6</a></span><span class="line">[<span class="mxinfo " id="T1:U26">~</span>,<span class="var type1" id="S11T1U56">min_right</span>]=min(<span class="mxinfo " id="T6:U28"><span class="var type1" id="S4T2U60">beams</span>(<span class="mxinfo " id="T7:U30">(length(<span class="var type1" id="S4T2U67">beams</span>)/2)+2:end</span>,<span class="mxinfo " id="T5:U32">1</span>)</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,7" id="srcline7"> 7</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,8" id="srcline8"> 8</a></span><span class="line"><span class="comment">%if minimum is in front or behind then</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,9" id="srcline9"> 9</a></span><span class="line"><span class="autoExtrinsicFcn" id="F56N2:B75">disp</span>(<span class="string">'test'</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="1,10" id="srcline10">10</a></span><span class="line"><span class="autoExtrinsicFcn" id="F57N2:B79">disp</span>(size(<span class="var type1" id="S4T2U82">beams</span>))</span></span>
<span class="srcline"><span class="lineno"><a href="1,11" id="srcline11">11</a></span><span class="line"><span class="keyword">if</span> <span class="mxinfo " id="T8:U34"><span class="mxinfo " id="T1:U35"><span class="var type1" id="S4T2U87">beams</span>(<span class="mxinfo " id="T5:U37">1</span>,<span class="mxinfo " id="T5:U38">1</span>)</span>&lt;<span class="mxinfo " id="T1:U39"><span class="var type1" id="S4T2U91">beams</span>(<span class="mxinfo " id="T1:U41">(length(<span class="var type1" id="S4T2U97">beams</span>)/2)+1</span>,<span class="mxinfo " id="T1:U43">1</span>)</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,12" id="srcline12">12</a></span><span class="line">    <span class="keyword">if</span> <span class="mxinfo " id="T8:U44"><span class="var type1" id="S8T1U104">minimum</span>&lt;=<span class="mxinfo " id="T1:U46"><span class="mxinfo " id="T1:U47">length(<span class="var type1" id="S4T2U108">beams</span>)</span>/<span class="mxinfo " id="T1:U49">2</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,13" id="srcline13">13</a></span><span class="line">        <span class="mxinfo " id="T1:U50"><span class="var type1" id="S2T1U112">theta</span>=<span class="mxinfo " id="T1:U52">(<span class="mxinfo " id="T1:U53"><span class="mxinfo " id="T1:U54">pi</span>/<span class="mxinfo " id="T1:U55">2</span></span>)-<span class="mxinfo " id="T1:U56">(<span class="mxinfo " id="T1:U57"><span class="var type1" id="S8T1U122">minimum</span>-<span class="mxinfo " id="T1:U59">1</span></span>)*<span class="var type1" id="S5T1U124">step</span></span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,14" id="srcline14">14</a></span><span class="line">    <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,15" id="srcline15">15</a></span><span class="line">        <span class="mxinfo " id="T1:U61"><span class="var type1" id="S2T1U128">theta</span>=<span class="mxinfo " id="T1:U63">-(<span class="mxinfo " id="T1:U64">(<span class="mxinfo " id="T1:U65"><span class="mxinfo " id="T1:U66">pi</span>/<span class="mxinfo " id="T1:U67">2</span></span>)-<span class="mxinfo " id="T1:U68">(<span class="mxinfo " id="T1:U69"><span class="mxinfo " id="T1:U70"><span class="mxinfo " id="T1:U71">length(<span class="var type1" id="S4T2U143">beams</span>)</span>+<span class="mxinfo " id="T1:U73">1</span></span>-<span class="var type1" id="S8T1U145">minimum</span></span>)*<span class="var type1" id="S5T1U146">step</span></span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,16" id="srcline16">16</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,17" id="srcline17">17</a></span><span class="line"><span class="keyword">elseif</span> <span class="mxinfo " id="T8:U76"><span class="mxinfo " id="T1:U77"><span class="var type1" id="S4T2U150">beams</span>(<span class="mxinfo " id="T5:U79">1</span>,<span class="mxinfo " id="T5:U80">1</span>)</span>&gt;<span class="mxinfo " id="T1:U81"><span class="var type1" id="S4T2U154">beams</span>(<span class="mxinfo " id="T1:U83">(length(<span class="var type1" id="S4T2U160">beams</span>)/2)+1</span>,<span class="mxinfo " id="T1:U85">1</span>)</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,18" id="srcline18">18</a></span><span class="line">    <span class="keyword">if</span> <span class="mxinfo " id="T8:U86"><span class="var type1" id="S8T1U167">minimum</span>&lt;=<span class="mxinfo " id="T1:U88"><span class="mxinfo " id="T1:U89">length(<span class="var type1" id="S4T2U171">beams</span>)</span>/<span class="mxinfo " id="T1:U91">2</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,19" id="srcline19">19</a></span><span class="line">        <span class="mxinfo " id="T1:U92"><span class="var type1" id="S2T1U175">theta</span>=<span class="mxinfo " id="T1:U94">-(<span class="mxinfo " id="T1:U95">(<span class="mxinfo " id="T1:U96"><span class="mxinfo " id="T1:U97">pi</span>/<span class="mxinfo " id="T1:U98">2</span></span>)-<span class="mxinfo " id="T1:U99">(<span class="mxinfo " id="T1:U100">(<span class="mxinfo " id="T1:U101"><span class="mxinfo " id="T1:U102"><span class="mxinfo " id="T1:U103">length(<span class="var type1" id="S4T2U192">beams</span>)</span>/<span class="mxinfo " id="T1:U105">2</span></span>+<span class="mxinfo " id="T1:U106">1</span></span>)-<span class="var type1" id="S8T1U195">minimum</span></span>)*<span class="var type1" id="S5T1U196">step</span></span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,20" id="srcline20">20</a></span><span class="line">    <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,21" id="srcline21">21</a></span><span class="line">        <span class="mxinfo " id="T1:U109"><span class="var type1" id="S2T1U200">theta</span>=<span class="mxinfo " id="T1:U111">(<span class="mxinfo " id="T1:U112"><span class="mxinfo " id="T1:U113">pi</span>/<span class="mxinfo " id="T1:U114">2</span></span>)-<span class="mxinfo " id="T1:U115">(<span class="mxinfo " id="T1:U116"><span class="var type1" id="S8T1U210">minimum</span>-(<span class="mxinfo " id="T1:U118"><span class="mxinfo " id="T1:U119"><span class="mxinfo " id="T1:U120">length(<span class="var type1" id="S4T2U216">beams</span>)</span>/<span class="mxinfo " id="T1:U122">2</span></span>+<span class="mxinfo " id="T1:U123">1</span></span>)</span>)*<span class="var type1" id="S5T1U219">step</span></span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,22" id="srcline22">22</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,23" id="srcline23">23</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,24" id="srcline24">24</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,25" id="srcline25">25</a></span><span class="line"><span class="keyword">if</span> <span class="mxinfo " id="T8:U125"><span class="var type1" id="S8T1U223">minimum</span>&lt;=<span class="mxinfo " id="T1:U127"><span class="mxinfo " id="T1:U128">length(<span class="var type1" id="S4T2U227">beams</span>)</span>/<span class="mxinfo " id="T1:U130">2</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,26" id="srcline26">26</a></span><span class="line">    <span class="mxinfo " id="T1:U131"><span class="var type1" id="S15T1U231">x</span>=<span class="mxinfo " id="T1:U133"><span class="var type1" id="S4T2U233">beams</span>(<span class="mxinfo " id="T1:U135"><span class="var type1" id="S8T1U235">minimum</span>+(<span class="mxinfo " id="T1:U137"><span class="mxinfo " id="T1:U138">length(<span class="var type1" id="S4T2U240">beams</span>)</span>/<span class="mxinfo " id="T1:U140">2</span></span>)</span>,<span class="mxinfo " id="T1:U141">1</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,27" id="srcline27">27</a></span><span class="line">    <span class="mxinfo " id="T1:U142"><span class="var type1" id="S16T1U245">y</span>=<span class="mxinfo " id="T1:U144"><span class="var type1" id="S4T2U247">beams</span>(<span class="var type1" id="S8T1U248">minimum</span>,<span class="mxinfo " id="T1:U147">1</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,28" id="srcline28">28</a></span><span class="line"><span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,29" id="srcline29">29</a></span><span class="line">    <span class="mxinfo " id="T1:U148"><span class="var type1" id="S15T1U253">x</span>=<span class="mxinfo " id="T1:U150"><span class="var type1" id="S4T2U255">beams</span>(<span class="var type1" id="S8T1U256">minimum</span>,<span class="mxinfo " id="T1:U153">1</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,30" id="srcline30">30</a></span><span class="line">    <span class="mxinfo " id="T1:U154"><span class="var type1" id="S16T1U260">y</span>=<span class="mxinfo " id="T1:U156"><span class="var type1" id="S4T2U262">beams</span>(<span class="mxinfo " id="T1:U158"><span class="var type1" id="S8T1U264">minimum</span>-(<span class="mxinfo " id="T1:U160"><span class="mxinfo " id="T1:U161">length(<span class="var type1" id="S4T2U269">beams</span>)</span>/<span class="mxinfo " id="T1:U163">2</span></span>)</span>,<span class="mxinfo " id="T1:U164">1</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,31" id="srcline31">31</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,32" id="srcline32">32</a></span><span class="line"><span class="mxinfo " id="T1:U165"><span class="var type1" id="S3T1U274">offset</span>=<span class="mxinfo " id="T1:U167"><span class="mxinfo " id="T1:U168">(<span class="mxinfo " id="T1:U169"><span class="var type1" id="S15T1U279">x</span>+<span class="var type1" id="S16T1U280">y</span></span>)/<span class="mxinfo " id="T1:U172">2</span></span>-<span class="var type1" id="S16T1U282">y</span></span></span>;</span></span>
</pre>

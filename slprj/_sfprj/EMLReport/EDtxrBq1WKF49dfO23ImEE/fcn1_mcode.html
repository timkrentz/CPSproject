<!-- saved from url=(0014)about:internet -->
<pre class="code">
<span class="srcline"><span class="lineno"><a href="1,1" id="srcline1"> 1</a></span><span class="line"><span class="keyword">function</span> [<span class="var type1" id="S2T1U3">theta</span>,<span class="var type1" id="S3T1U4">offset</span>]  = fcn(<span class="var type1" id="S4T2U7">beams</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="1,2" id="srcline2"> 2</a></span><span class="line"><span class="mxinfo " id="T1:U4"><span class="var type1" id="S5T1U10">step</span>=<span class="mxinfo " id="T1:U6"><span class="mxinfo " id="T1:U7">2*pi</span>/<span class="mxinfo " id="T1:U8">length(<span class="var type1" id="S4T2U18">beams</span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,3" id="srcline3"> 3</a></span><span class="line"><span class="mxinfo " id="T1:U10"><span class="var type1" id="S2T1U21">theta</span>=<span class="mxinfo " id="T1:U12">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,4" id="srcline4"> 4</a></span><span class="line">[<span class="mxinfo " id="T1:U13">~</span>,<span class="var type1" id="S8T1U27">minimum</span>]=min(<span class="mxinfo " id="T3:U15"><span class="var type1" id="S4T2U31">beams</span>(<span class="mxinfo " id="T4:U17">:</span>,<span class="mxinfo " id="T5:U18">1</span>)</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,5" id="srcline5"> 5</a></span><span class="line">[<span class="mxinfo " id="T1:U19">~</span>,<span class="var type1" id="S10T1U38">min_left</span>]=min(<span class="mxinfo " id="T6:U21"><span class="var type1" id="S4T2U42">beams</span>(<span class="mxinfo " id="T7:U23">2:(<span class="mxinfo " id="T8:U24">length(<span class="var type1" id="S4T2U49">beams</span>)</span>/2)</span>,<span class="mxinfo " id="T5:U26">1</span>)</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,6" id="srcline6"> 6</a></span><span class="line">[<span class="mxinfo " id="T1:U27">~</span>,<span class="var type1" id="S11T1U56">min_right</span>]=min(<span class="mxinfo " id="T6:U29"><span class="var type1" id="S4T2U60">beams</span>(<span class="mxinfo " id="T7:U31">(<span class="mxinfo " id="T8:U32">length(<span class="var type1" id="S4T2U67">beams</span>)</span>/2)+2:end</span>,<span class="mxinfo " id="T5:U34">1</span>)</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,7" id="srcline7"> 7</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,8" id="srcline8"> 8</a></span><span class="line"><span class="comment">%if minimum is in front or behind then</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,9" id="srcline9"> 9</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,10" id="srcline10">10</a></span><span class="line"><span class="mxinfo " id="T9:U35"><span class="autoExtrinsicFcn" id="F46N2:B75">disp</span>((<span class="mxinfo " id="T1:U36">length(<span class="var type1" id="S4T2U79">beams</span>)</span>))</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,11" id="srcline11">11</a></span><span class="line"><span class="keyword">if</span> <span class="mxinfo " id="T10:U38"><span class="mxinfo " id="T1:U39"><span class="var type1" id="S4T2U84">beams</span>(<span class="mxinfo " id="T5:U41">1</span>,<span class="mxinfo " id="T5:U42">1</span>)</span>&lt;<span class="mxinfo " id="T1:U43"><span class="var type1" id="S4T2U88">beams</span>(<span class="mxinfo " id="T1:U45">(<span class="mxinfo " id="T8:U46">length(<span class="var type1" id="S4T2U94">beams</span>)</span>/2)+1</span>,<span class="mxinfo " id="T1:U48">1</span>)</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,12" id="srcline12">12</a></span><span class="line">    <span class="keyword">if</span> <span class="mxinfo " id="T10:U49"><span class="var type1" id="S8T1U101">minimum</span>&lt;=<span class="mxinfo " id="T1:U51"><span class="mxinfo " id="T1:U52">length(<span class="var type1" id="S4T2U105">beams</span>)</span>/<span class="mxinfo " id="T1:U54">2</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,13" id="srcline13">13</a></span><span class="line">        <span class="mxinfo " id="T1:U55"><span class="var type1" id="S2T1U109">theta</span>=<span class="mxinfo " id="T1:U57">(<span class="mxinfo " id="T1:U58"><span class="mxinfo " id="T1:U59">pi</span>/<span class="mxinfo " id="T1:U60">2</span></span>)-<span class="mxinfo " id="T1:U61">(<span class="mxinfo " id="T1:U62"><span class="var type1" id="S8T1U119">minimum</span>-<span class="mxinfo " id="T1:U64">1</span></span>)*<span class="var type1" id="S5T1U121">step</span></span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,14" id="srcline14">14</a></span><span class="line">    <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,15" id="srcline15">15</a></span><span class="line">        <span class="mxinfo " id="T1:U66"><span class="var type1" id="S2T1U125">theta</span>=<span class="mxinfo " id="T1:U68">-(<span class="mxinfo " id="T1:U69">(<span class="mxinfo " id="T1:U70"><span class="mxinfo " id="T1:U71">pi</span>/<span class="mxinfo " id="T1:U72">2</span></span>)-<span class="mxinfo " id="T1:U73">(<span class="mxinfo " id="T1:U74"><span class="mxinfo " id="T1:U75"><span class="mxinfo " id="T1:U76">length(<span class="var type1" id="S4T2U140">beams</span>)</span>+<span class="mxinfo " id="T1:U78">1</span></span>-<span class="var type1" id="S8T1U142">minimum</span></span>)*<span class="var type1" id="S5T1U143">step</span></span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,16" id="srcline16">16</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,17" id="srcline17">17</a></span><span class="line"><span class="keyword">elseif</span> <span class="mxinfo " id="T1:U81"><span class="var type1" id="S4T2U147">beams</span>(<span class="mxinfo " id="T1:U83">1</span>,<span class="mxinfo " id="T1:U84">1</span>)</span>&gt;<span class="var type1" id="S4T2U151">beams</span>(<span class="mxinfo " id="T1:U86"><span class="message error" id="M1F1C">(<span class="mxinfo " id="T8:U87">length(<span class="var type1" id="S4T2U157">beams</span>)</span>/2)+1.5</span></span>,1)</span></span>
<span class="srcline"><span class="lineno"><a href="1,18" id="srcline18">18</a></span><span class="line">    <span class="keyword">if</span> <span class="mxinfo " id="T10:U89"><span class="var type1" id="S8T1U164">minimum</span>&lt;=<span class="mxinfo " id="T1:U91"><span class="mxinfo " id="T1:U92">length(<span class="var type1" id="S4T2U168">beams</span>)</span>/<span class="mxinfo " id="T1:U94">2</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,19" id="srcline19">19</a></span><span class="line">        <span class="mxinfo " id="T1:U95"><span class="var type1" id="S2T1U172">theta</span>=<span class="mxinfo " id="T1:U97">-(<span class="mxinfo " id="T1:U98">(<span class="mxinfo " id="T1:U99"><span class="mxinfo " id="T1:U100">pi</span>/<span class="mxinfo " id="T1:U101">2</span></span>)-<span class="mxinfo " id="T1:U102">(<span class="mxinfo " id="T1:U103">(<span class="mxinfo " id="T1:U104"><span class="mxinfo " id="T1:U105"><span class="mxinfo " id="T1:U106">length(<span class="var type1" id="S4T2U189">beams</span>)</span>/<span class="mxinfo " id="T1:U108">2</span></span>+<span class="mxinfo " id="T1:U109">1</span></span>)-<span class="var type1" id="S8T1U192">minimum</span></span>)*<span class="var type1" id="S5T1U193">step</span></span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,20" id="srcline20">20</a></span><span class="line">    <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,21" id="srcline21">21</a></span><span class="line">        <span class="mxinfo " id="T1:U112"><span class="var type1" id="S2T1U197">theta</span>=<span class="mxinfo " id="T1:U114">(<span class="mxinfo " id="T1:U115"><span class="mxinfo " id="T1:U116">pi</span>/<span class="mxinfo " id="T1:U117">2</span></span>)-<span class="mxinfo " id="T1:U118">(<span class="mxinfo " id="T1:U119"><span class="var type1" id="S8T1U207">minimum</span>-(<span class="mxinfo " id="T1:U121"><span class="mxinfo " id="T1:U122"><span class="mxinfo " id="T1:U123">length(<span class="var type1" id="S4T2U213">beams</span>)</span>/<span class="mxinfo " id="T1:U125">2</span></span>+<span class="mxinfo " id="T1:U126">1.5</span></span>)</span>)*<span class="var type1" id="S5T1U216">step</span></span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,22" id="srcline22">22</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,23" id="srcline23">23</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,24" id="srcline24">24</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,25" id="srcline25">25</a></span><span class="line"><span class="keyword">if</span> <span class="mxinfo " id="T10:U128"><span class="var type1" id="S8T1U220">minimum</span>&lt;=<span class="mxinfo " id="T1:U130"><span class="mxinfo " id="T1:U131">length(<span class="var type1" id="S4T2U224">beams</span>)</span>/<span class="mxinfo " id="T1:U133">2</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,26" id="srcline26">26</a></span><span class="line">    <span class="mxinfo " id="T1:U134"><span class="var type1" id="S14T1U228">x</span>=<span class="mxinfo " id="T1:U136"><span class="var type1" id="S4T2U230">beams</span>(<span class="mxinfo " id="T1:U138"><span class="var type1" id="S8T1U232">minimum</span>+(<span class="mxinfo " id="T1:U140"><span class="mxinfo " id="T1:U141">length(<span class="var type1" id="S4T2U237">beams</span>)</span>/<span class="mxinfo " id="T1:U143">2</span></span>)</span>,<span class="mxinfo " id="T1:U144">1</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,27" id="srcline27">27</a></span><span class="line">    <span class="mxinfo " id="T1:U145"><span class="var type1" id="S15T1U242">y</span>=<span class="mxinfo " id="T1:U147"><span class="var type1" id="S4T2U244">beams</span>(<span class="var type1" id="S8T1U245">minimum</span>,<span class="mxinfo " id="T1:U150">1</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,28" id="srcline28">28</a></span><span class="line"><span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,29" id="srcline29">29</a></span><span class="line">    <span class="mxinfo " id="T1:U151"><span class="var type1" id="S14T1U250">x</span>=<span class="mxinfo " id="T1:U153"><span class="var type1" id="S4T2U252">beams</span>(<span class="var type1" id="S8T1U253">minimum</span>,<span class="mxinfo " id="T1:U156">1</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,30" id="srcline30">30</a></span><span class="line">    <span class="mxinfo " id="T1:U157"><span class="var type1" id="S15T1U257">y</span>=<span class="mxinfo " id="T1:U159"><span class="var type1" id="S4T2U259">beams</span>(<span class="mxinfo " id="T1:U161"><span class="var type1" id="S8T1U261">minimum</span>-(<span class="mxinfo " id="T1:U163"><span class="mxinfo " id="T1:U164">length(<span class="var type1" id="S4T2U266">beams</span>)</span>/<span class="mxinfo " id="T1:U166">2</span></span>)</span>,<span class="mxinfo " id="T1:U167">1</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,31" id="srcline31">31</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,32" id="srcline32">32</a></span><span class="line"><span class="mxinfo " id="T1:U168"><span class="var type1" id="S3T1U271">offset</span>=<span class="mxinfo " id="T1:U170"><span class="mxinfo " id="T1:U171">(<span class="mxinfo " id="T1:U172"><span class="var type1" id="S14T1U276">x</span>+<span class="var type1" id="S15T1U277">y</span></span>)/<span class="mxinfo " id="T1:U175">2</span></span>-<span class="var type1" id="S15T1U279">y</span></span></span>;</span></span>
</pre>
